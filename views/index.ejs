<% page = { 'title' : 'Fambook', 'key': 'Fambook Home'} %>
<% assets = { 'css' : [], 'js' : ['angular-1.0.3.js', 'angular/fambookApp.js', 'angular/services/soiService.js', 'angular/services/watchNotifyService.js',
'angular/directives/notification.js', 'util-fambook.js', 'angular/filters/html-filter.js', 'bootstrap.js',
'angular/directives/chat.js', 'socket.io.js'] } %>

<% assets.css.push({'all': 'index.styl'}) %>

    <script data-control='Main'>
      var user = <%- (typeof user !== 'undefined') ? JSON.stringify(user) : undefined %>;
//      console.log("User: ", user)
//
//
//      var worker = new Worker('/js/worker.js');
//      worker.onmessage = function(e) {
//        console.log("Received from worker: ", e);
//      }
//      worker.postMessage({cmd: 'start'}); // Start the worker.
//      worker.addEventListener('error', function(e) {
//        console.log("Worker error: ", e);
//      }, false);






      $('.click-alert').onclick = (function(e) {
        // init the count to 0
        var count = 0;
        //alert("click count: " + count)
        return function(e) {

          //count
          count++;

          if (count === 3) {
            // do something every third time
            alert("Third time's the charm!");
            //reset counter
            count = 0;
          }
        };
      })();

    </script>
<div></div>
<div id='main' class='container-fluid experiments' ng-app="fambook" ng-controller="feedController">
  <div class='no-layout'>

    <div class='row-fluid show-grid'>
      <div class='favorites span3'>
        <h4>FAVORITES</h4>
        <ul class='unstyled'>
          <li class='selected'>
            <div><a href=''>News Feed</a></div>
            <div>&nbsp;</div>
          </li>
          <li>
            <div><a href=''>Relatives</a></div>
            <div>24</div>
          </li>
          <li>
            <div><a href=''>Friends</a></div>
            <div>36</div>
          </li>
          <li>
            <div><a href=''>Photos</a></div>
            <div>202</div>
          </li>
        </ul>
      </div>
      <div class='feed span6'>
        <div class='spinner'></div>
        <ul class='unstyled app-margin'>
          <li ng-repeat="alert in alerts | orderBy:-changeTime">
            <notification/>
          </li>
        </ul>
      </div>
      <aside class='aux span3'>
        <div class='new-people'>
          <div class='header'>People you may know</div>
          <ul class='unstyled'>
            <li>
              <div>
                <a href='#'>
                  <img src='/getangularimage/relative.jpg'>
                </a>
              </div>
              <ul class='unstyled'>
                <li>
                  <a href='#'>Joseph Muhlstein</a>
                </li>
                <li>5 mutual relatives</li>
                <li><a href=''>View my relationship</a></li>
                <li><a href='#'>+1 Add Relative</a></li>
              </ul>
            </li>
            <li>
              <div>
                <a href='#'>
                  <img src='/getangularimage/michael.jpg'>
                </a>
              </div>
              <ul class='unstyled'>
                <li>
                  <a href='#'>Michael Bennett</a>
                </li>
                <li>2 mutual friends</li>
                <li><a href='#'>+1 Add friend</a></li>
              </ul>
            </li>
            <li>
              <div>
                <a href='#'>
                  <img src='/getangularimage/grandma.jpg'>
                </a>
              </div>
              <ul class='unstyled'>
                <li>
                  <a href='#'>Carolyn Pfaltzgraff</a>
                </li>
                <li>2 mutual relatives</li>
                <li><a href=''>View my relationship</a></li>
                <li><a href='#'>+1 Add relative</a></li>
              </ul>
            </li>
            <li>
              <div>
                <a href='#'>
                  <img src='/getangularimage/nick.jpg'>
                </a>
              </div>
              <ul class='unstyled'>
                <li>
                  <a href='#'>Nick Liechty</a>
                </li>
                <li>9 mutual relatives</li>
                <li><a href=''>View my relationship</a></li>
                <li><a href='#'>+1 Add relative</a></li>
              </ul>
            </li>
            <li>
              <div>
                <a href='#'>
                  <img src='/getangularimage/william.jpg'>
                </a>
              </div>
              <ul class='unstyled'>
                <li>
                  <a href='#'>William Christensen</a>
                </li>
                <li>3 mutual relatives</li>
                <li><a href=''>View my relationship</a></li>
                <li><a href='#'>+1 Add relative</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </aside>
<!--        <div class='chat app-padding'>
          <chat />
        </div>
      </div>
      <div class='ajaxTest'>
        <button class='click-alert btn btn-water'>Click alert</button>
      </div>-->
    </div>
  </div>
</div>
<div id="relationshipModal"
     class="photos-app modal hide fade"
     tabindex="-1"
     role="dialog"
     aria-labelledby="myModalLabel"
     aria-hidden="true">
  <img class="loading relationship-loading hide" src="<%- img('loading.gif') %>" alt="Loading" >
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4>Relationship</h4>
  </div>
  <div class="modal-body"></div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
  </div>
</div>
</div>